if [ ${BASH_VERSINFO:-0} -ge 3 ] && [[ $- =~ i ]] &&
   [ -r @MODULESHOME@/init/bash_completion ]; then
   . @MODULESHOME@/init/bash_completion
fi

# only redirect module from stderr to stdout in interactive mode
# to avoid breaking non interactive session (scp, sftp, etc)
if [[ $- =~ i ]]; then
   moduleraw() { eval `@TCLSH@ @MODULESHOME@/modulecmd.tcl bash $*`; }
   module() { moduleraw $* 2>&1 ; }
else
   module() { eval `@TCLSH@ @MODULESHOME@/modulecmd.tcl bash $*`; }
fi

MODULESHOME=@MODULESHOME@; export MODULESHOME

. @MODULESHOME@/init/modulerc
