if {![info exists env(TCLSH)]} {
   if {[file exists /usr/bin/tclsh]} {
      set env(TCLSH) "/usr/bin/tclsh"
   } elseif {[file exists /bin/tclsh]} {
      set env(TCLSH) "/bin/tclsh"
   } else {
      set env(TCLSH) [exec which tclsh]
   }
}

proc module {args} {
   global env; 
   set script {}; 
   if {[catch { set script [eval exec $env(TCLSH) "@MODULESHOME@/modulecmd.tcl" "tcl" $args] } msg]} {
      puts $msg
   }; 
   uplevel $script; 
}

set env(MODULESHOME) @MODULESHOME@

source @MODULESHOME@/init/modulerc
