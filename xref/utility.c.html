<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<!-- This HTML file generated by cxref. -->
<!-- cxref program (c) Andrew M. Bishop 1995,96,97,98,99. -->

<!--
Cxref: cxref -block-comments -verbatim-comments -xref-all -index-all -html -Oxref utility.c
CPP  : gcc -E -C -dD -dI
-->

<HTML>

<HEAD>
<TITLE>Cross reference for utility.c of cxref.</TITLE>
</HEAD>

<BODY>

<h1><a name="file">File utility.c</a></h1>
<pre>
 ** ** Module Header ******************************************************* **
 ** 									     **
 **   Modules Revision 3.0						     **
 **   Providing a flexible user environment				     **
 ** 									     **
 **   File:		utility.c					     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Authors:	John Furlan, jlf@behere.com				     **
 **		Jens Hamisch, jens@Strawberry.COM			     **
 ** 									     **
 **   Description:	General routines that are called throughout Modules  **
 **			which are not necessarily specific to any single     **
 **			block of functionality.				     **
 ** 									     **
 **   Exports:		store_hash_value				     **
 **			clear_hash_value				     **
 **			Delete_Global_Hash_Tables			     **
 **			Delete_Hash_Tables				     **
 **			Copy_Hash_Tables				     **
 **			Unwind_Modulefile_Changes			     **
 **			Output_Modulefile_Changes			     **
 **			set_derelict					     **
 **			IsLoaded_ExactMatch				     **
 **			IsLoaded					     **
 **			chk_marked_entry				     **
 **			set_marked_entry				     **
 **			Update_LoadedList				     **
 **			ForceBasePath					     **
 **			ForceSacredPath					     **
 **			check_magic					     **
 **			cleanse_path					     **
 **			chk4spch					     **
 **			xdup						     **
 **			xgetenv						     **
 **									     **
 **			strdup		if not defined by the system libs.   **
 **			strtok		if not defined by the system libs.   **
 ** 									     **
 **   Notes:								     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<table>
<tr><td>References Variables:
<td><a href="utility.c.html#var-Id">Id</a><td><a href="utility.c.html#var-Id">utility.c</a>
</table>

<hr>
<h2>Included Files</h2>

<ul>
<li><tt><a href="modules_def.h.html#file">#include &quot;modules_def.h&quot;</a></tt>
<ul>
<li><tt>#include &lt;stdio.h&gt;</tt>
<li><tt>#include &lt;tcl.h&gt;</tt>
<li><tt><a href="config.h.html#file">#include &quot;config.h&quot;</a></tt>
<li><tt>#include &lt;stdlib.h&gt;</tt>
<li><tt>#include &lt;string.h&gt;</tt>
<li><tt>#include &lt;unistd.h&gt;</tt>
<li><tt>#include &lt;sys/types.h&gt;</tt>
<li><tt>#include &lt;ctype.h&gt;</tt>
<li><tt>#include &lt;sys/stat.h&gt;</tt>
<li><tt>#include &lt;sys/termios.h&gt;</tt>
<li><tt>#include &lt;fcntl.h&gt;</tt>
<li><tt>#include &lt;sys/ioctl.h&gt;</tt>
<li><tt>#include &lt;dirent.h&gt;</tt>
<li><tt>#include &lt;errno.h&gt;</tt>
</ul>
</ul>

<hr>
<h2>Local Variables</h2>

<b><a name="var-Id">Id</a></b><br>
<tt>static char Id[]</tt><br>
<table>
<tr><td>Used in:
<td>&nbsp;<td><a href="utility.c.html#file">utility.c</a>

</table>
<p>
<b><a name="var-UseId">UseId</a></b><br>
<tt>static void* UseId[]</tt><br>
<p>
<b><a name="var-module_name">module_name</a></b><br>
<tt>static char module_name[]</tt><br>
<table>
<tr><td>Used in:
<td><a href="#func-Copy_Hash_Tables">Copy_Hash_Tables()</a>
<tr><td>&nbsp;
<td><a href="#func-Output_Modulefile_Aliases">Output_Modulefile_Aliases()</a>
<tr><td>&nbsp;
<td><a href="#func-Output_Modulefile_Changes">Output_Modulefile_Changes()</a>
<tr><td>&nbsp;
<td><a href="#func-__IsLoaded">__IsLoaded()</a>
<tr><td>&nbsp;
<td><a href="#func-check_magic">check_magic()</a>
<tr><td>&nbsp;
<td><a href="#func-getLMFILES">getLMFILES()</a>
<tr><td>&nbsp;
<td><a href="#func-output_set_variable">output_set_variable()</a>
<tr><td>&nbsp;
<td><a href="#func-output_unset_variable">output_unset_variable()</a>

</table>
<p>
<b><a name="var-cmd_separator">cmd_separator</a></b><br>
<tt>static char cmd_separator</tt><br>
<table>
<tr><td>Used in:
<td><a href="#func-Output_Modulefile_Aliases">Output_Modulefile_Aliases()</a>
<tr><td>&nbsp;
<td><a href="#func-output_set_variable">output_set_variable()</a>
<tr><td>&nbsp;
<td><a href="#func-output_unset_variable">output_unset_variable()</a>

</table>
<p>
<b><a name="var-aliasfile">aliasfile</a></b><br>
<tt>static FILE* aliasfile</tt><br>
<table>
<tr><td>Used in:
<td><a href="#func-Output_Modulefile_Aliases">Output_Modulefile_Aliases()</a>
<tr><td>&nbsp;
<td><a href="#func-Output_Modulefile_Changes">Output_Modulefile_Changes()</a>
<tr><td>&nbsp;
<td><a href="#func-output_function">output_function()</a>
<tr><td>&nbsp;
<td><a href="#func-output_set_alias">output_set_alias()</a>
<tr><td>&nbsp;
<td><a href="#func-output_unset_alias">output_unset_alias()</a>

</table>
<p>
<b><a name="var-alias_separator">alias_separator</a></b><br>
<tt>static char alias_separator</tt><br>
<table>
<tr><td>Used in:
<td><a href="#func-Output_Modulefile_Aliases">Output_Modulefile_Aliases()</a>
<tr><td>&nbsp;
<td><a href="#func-output_function">output_function()</a>
<tr><td>&nbsp;
<td><a href="#func-output_set_alias">output_set_alias()</a>
<tr><td>&nbsp;
<td><a href="#func-output_unset_alias">output_unset_alias()</a>

</table>

<hr>
<h2><a name="func-Copy_Hash_Tables">Global Function Copy_Hash_Tables()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		Copy_Hash_Tables				     **
 ** 									     **
 **   Description:	Allocate new hash tables for the global environment, **
 **			initialize them and copy the contents of the current **
 **			tables into them.				     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	-						     **
 **   Result:		Tcl_HashTable**		Pointer to the new list of   **
 **						hash tables		     **
 **   Attached Globals:	setenvHashTable,				     **
 **			unsetenvHashTable,				     **
 **			aliasSetHashTable,				     **
 **			aliasUnsetHashTable				     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>Tcl_HashTable** Copy_Hash_Tables ( void )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td><a href="error.c.html#func-Module_Error">Module_Error()</a><td><a href="error.c.html#func-Module_Error">error.c</a>
<tr><td>&nbsp;
<td colspan=2>Tcl_FirstHashEntry(), Tcl_InitHashTable(), Tcl_NextHashEntry(), malloc(), strdup()
<tr><td>Called by:
<td><a href="ModuleCmd_Load.c.html#func-ModuleCmd_Load">ModuleCmd_Load()</a><td><a href="ModuleCmd_Load.c.html#func-ModuleCmd_Load">ModuleCmd_Load.c</a>
<tr><td>References Variables:
<td><a href="main.c.html#var-aliasSetHashTable">aliasSetHashTable</a><td><a href="main.c.html#var-aliasSetHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-aliasUnsetHashTable">aliasUnsetHashTable</a><td><a href="main.c.html#var-aliasUnsetHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#var-module_name">module_name</a><td><a href="utility.c.html#var-module_name">utility.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-setenvHashTable">setenvHashTable</a><td><a href="main.c.html#var-setenvHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-unsetenvHashTable">unsetenvHashTable</a><td><a href="main.c.html#var-unsetenvHashTable">main.c</a>

</table>

<hr>
<h2><a name="func-Delete_Global_Hash_Tables">Global Function Delete_Global_Hash_Tables()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		Delete_Global_Hash_Tables			     **
 **			Delete_Hash_Tables				     **
 ** 									     **
 **   Description: 	Deletes our environment hash tables.		     **
 ** 									     **
 **   First Edition:	92/10/14					     **
 ** 									     **
 **   Parameters:	Tcl_HashTable	**table_ptr	NULL-Terminated list **
 **							of hash tables to be **
 **							deleted		     **
 **   Result:		-						     **
 ** 									     **
 **   Attached Globals:	setenvHashTable,				     **
 **			unsetenvHashTable,				     **
 **			aliasSetHashTable,				     **
 **			aliasUnsetHashTable				     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>void Delete_Global_Hash_Tables ( void )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td><a href="utility.c.html#func-Delete_Hash_Tables">Delete_Hash_Tables()</a><td><a href="utility.c.html#func-Delete_Hash_Tables">utility.c</a>
<tr><td>Called by:
<td><a href="utility.c.html#func-Unwind_Modulefile_Changes">Unwind_Modulefile_Changes()</a><td><a href="utility.c.html#func-Unwind_Modulefile_Changes">utility.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#func-main">main()</a><td><a href="main.c.html#func-main">main.c</a>
<tr><td>References Variables:
<td><a href="main.c.html#var-aliasSetHashTable">aliasSetHashTable</a><td><a href="main.c.html#var-aliasSetHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-aliasUnsetHashTable">aliasUnsetHashTable</a><td><a href="main.c.html#var-aliasUnsetHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-setenvHashTable">setenvHashTable</a><td><a href="main.c.html#var-setenvHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-unsetenvHashTable">unsetenvHashTable</a><td><a href="main.c.html#var-unsetenvHashTable">main.c</a>

</table>

<hr>
<h2><a name="func-Delete_Hash_Tables">Global Function Delete_Hash_Tables()</a></h2>
<tt>void Delete_Hash_Tables ( Tcl_HashTable** table_ptr )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td colspan=2>Tcl_DeleteHashTable(), Tcl_FirstHashEntry(), Tcl_NextHashEntry()
<tr><td>Called by:
<td><a href="utility.c.html#func-Delete_Global_Hash_Tables">Delete_Global_Hash_Tables()</a><td><a href="utility.c.html#func-Delete_Global_Hash_Tables">utility.c</a>
<tr><td>&nbsp;
<td><a href="ModuleCmd_Load.c.html#func-ModuleCmd_Load">ModuleCmd_Load()</a><td><a href="ModuleCmd_Load.c.html#func-ModuleCmd_Load">ModuleCmd_Load.c</a>

</table>

<hr>
<h2><a name="func-ForceBasePath">Global Function ForceBasePath()</a></h2>
<tt>int ForceBasePath ( Tcl_Interp* interp, char* variable_name, char* force_pathname )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td><a href="utility.c.html#func-ForcePath">ForcePath()</a><td><a href="utility.c.html#func-ForcePath">utility.c</a>

</table>

<hr>
<h2><a name="func-ForceSacredPath">Global Function ForceSacredPath()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		ForceBasePath					     **
 ** 									     **
 **   Description:	Remove and than add the passed value from/to the     **
 **			passed variable. After removal, the module-path is   **
 **			APPENDED to the passed variable if 'ForceBasePath'   **
 **			has been called and PREPENDED if it was 	     **
 **			'ForceSacredPath'				     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	Tcl_Interp      *interp		Attached Tcl interpr.**
 **			char            *variable_name	Attached variable    **
 **			char            *force_pathname Name of the path to  **
 **							be removed/added     **
 **									     **
 **   Result:		int	1	Successfull operation		     **
 **									     **
 **   Attached Globals:	-						     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>int ForceSacredPath ( Tcl_Interp* interp, char* variable_name, char* force_pathname )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td><a href="utility.c.html#func-ForcePath">ForcePath()</a><td><a href="utility.c.html#func-ForcePath">utility.c</a>

</table>

<hr>
<h2><a name="func-IsLoaded">Global Function IsLoaded()</a></h2>
<tt>int IsLoaded ( Tcl_Interp* interp, char* modulename, char** realname, char* filename )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td><a href="utility.c.html#func-__IsLoaded">__IsLoaded()</a><td><a href="utility.c.html#func-__IsLoaded">utility.c</a>
<tr><td>Called by:
<td><a href="ModuleCmd_Load.c.html#func-ModuleCmd_Load">ModuleCmd_Load()</a><td><a href="ModuleCmd_Load.c.html#func-ModuleCmd_Load">ModuleCmd_Load.c</a>
<tr><td>&nbsp;
<td><a href="ModuleCmd_Switch.c.html#func-ModuleCmd_Switch">ModuleCmd_Switch()</a><td><a href="ModuleCmd_Switch.c.html#func-ModuleCmd_Switch">ModuleCmd_Switch.c</a>
<tr><td>&nbsp;
<td><a href="cmdIsLoaded.c.html#func-cmdIsLoaded">cmdIsLoaded()</a><td><a href="cmdIsLoaded.c.html#func-cmdIsLoaded">cmdIsLoaded.c</a>
<tr><td>&nbsp;
<td><a href="cmdConflict.c.html#func-cmdPrereq">cmdPrereq()</a><td><a href="cmdConflict.c.html#func-cmdPrereq">cmdConflict.c</a>

</table>

<hr>
<h2><a name="func-IsLoaded_ExactMatch">Global Function IsLoaded_ExactMatch()</a></h2>
<tt>int IsLoaded_ExactMatch ( Tcl_Interp* interp, char* modulename, char** realname, char* filename )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td><a href="utility.c.html#func-__IsLoaded">__IsLoaded()</a><td><a href="utility.c.html#func-__IsLoaded">utility.c</a>
<tr><td>Called by:
<td><a href="cmdConflict.c.html#func-checkConflict">checkConflict()</a><td><a href="cmdConflict.c.html#func-checkConflict">cmdConflict.c</a>

</table>

<hr>
<h2><a name="func-Output_Modulefile_Changes">Global Function Output_Modulefile_Changes()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		Output_Modulefile_Changes			     **
 ** 									     **
 **   Description:	Is used to flush out the changes of the current	     **
 **			modulefile in a manner depending upon whether the    **
 **			modulefile was successfull or unsuccessfull.	     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	Tcl_Interp	*interp		The attached Tcl in- **
 **							terpreter	     **
 ** 									     **
 **   Result:		int	TCL_OK		Successful operation	     **
 ** 									     **
 **   Attached Globals:	setenvHashTable,				     **
 **			unsetenvHashTable,				     **
 **			aliasSetHashTable,	via Output_Modulefile_Aliases**
 **			aliasUnsetHashTable	via Output_Modulefile_Aliases**
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>int Output_Modulefile_Changes ( Tcl_Interp* interp )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td><a href="utility.c.html#func-Clear_Global_Hash_Tables">Clear_Global_Hash_Tables()</a><td><a href="utility.c.html#func-Clear_Global_Hash_Tables">utility.c</a>
<tr><td>&nbsp;
<td><a href="error.c.html#func-Module_Error">Module_Error()</a><td><a href="error.c.html#func-Module_Error">error.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-Output_Modulefile_Aliases">Output_Modulefile_Aliases()</a><td><a href="utility.c.html#func-Output_Modulefile_Aliases">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-output_set_variable">output_set_variable()</a><td><a href="utility.c.html#func-output_set_variable">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-output_unset_variable">output_unset_variable()</a><td><a href="utility.c.html#func-output_unset_variable">utility.c</a>
<tr><td>&nbsp;
<td colspan=2>Tcl_FirstHashEntry(), Tcl_GetVar2(), Tcl_NextHashEntry(), fflush()
<tr><td>Called by:
<td><a href="main.c.html#func-main">main()</a><td><a href="main.c.html#func-main">main.c</a>
<tr><td>References Variables:
<td><a href="cmdModule.c.html#var-_fil_stdout">_fil_stdout</a><td><a href="cmdModule.c.html#var-_fil_stdout">cmdModule.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#var-aliasfile">aliasfile</a><td><a href="utility.c.html#var-aliasfile">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#var-module_name">module_name</a><td><a href="utility.c.html#var-module_name">utility.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-setenvHashTable">setenvHashTable</a><td><a href="main.c.html#var-setenvHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-unsetenvHashTable">unsetenvHashTable</a><td><a href="main.c.html#var-unsetenvHashTable">main.c</a>

</table>

<hr>
<h2><a name="func-Unwind_Modulefile_Changes">Global Function Unwind_Modulefile_Changes()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:								     **
 ** 									     **
 **   Description:	Once a the loading or unloading of a modulefile	     **
 **			fails, any changes it has made to the environment    **
 **			must be undone and reset to its previous state. This **
 **			function is responsible for unwinding any changes a  **
 **			modulefile has made.				     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	Tcl_Interp	 *interp	According TCL interp.**
 **			Tcl_HashTable	**oldTables	Hash tables storing  **
 **							the former environm. **
 **   Result:								     **
 **   Attached Globals:							     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>int Unwind_Modulefile_Changes ( Tcl_Interp* interp, Tcl_HashTable** oldTables )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td><a href="utility.c.html#func-Clear_Global_Hash_Tables">Clear_Global_Hash_Tables()</a><td><a href="utility.c.html#func-Clear_Global_Hash_Tables">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-Delete_Global_Hash_Tables">Delete_Global_Hash_Tables()</a><td><a href="utility.c.html#func-Delete_Global_Hash_Tables">utility.c</a>
<tr><td>&nbsp;
<td colspan=2>Tcl_FirstHashEntry(), Tcl_NextHashEntry(), Tcl_SetVar2()
<tr><td>Called by:
<td><a href="ModuleCmd_Load.c.html#func-ModuleCmd_Load">ModuleCmd_Load()</a><td><a href="ModuleCmd_Load.c.html#func-ModuleCmd_Load">ModuleCmd_Load.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#func-main">main()</a><td><a href="main.c.html#func-main">main.c</a>
<tr><td>References Variables:
<td><a href="main.c.html#var-aliasSetHashTable">aliasSetHashTable</a><td><a href="main.c.html#var-aliasSetHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-aliasUnsetHashTable">aliasUnsetHashTable</a><td><a href="main.c.html#var-aliasUnsetHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-setenvHashTable">setenvHashTable</a><td><a href="main.c.html#var-setenvHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-unsetenvHashTable">unsetenvHashTable</a><td><a href="main.c.html#var-unsetenvHashTable">main.c</a>

</table>

<hr>
<h2><a name="func-Update_LoadedList">Global Function Update_LoadedList()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		Update_LoadedList				     **
 ** 									     **
 **   Description:	Add or remove the passed modulename and filename to/ **
 **			from LOADEDMODULES and _LMFILES_		     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	Tcl_Interp      *interp		Attached Tcl Interp. **
 **			char            *modulename	Name of the module   **
 **			char            *filename	Full path name of the**
 **							related modulefile   **
 **									     **
 **   Result:		int	1	Successfull operation		     **
 **									     **
 **   Attached Globals:	flags		Controls whether the modulename      **
 **					should be added (M_XXXX) or removed  **
 **					(M_REMOVE) from the list of loaded   **
 **					modules				     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>int Update_LoadedList ( Tcl_Interp* interp, char* modulename, char* filename )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td><a href="cmdPath.c.html#func-cmdRemovePath">cmdRemovePath()</a><td><a href="cmdPath.c.html#func-cmdRemovePath">cmdPath.c</a>
<tr><td>&nbsp;
<td><a href="cmdPath.c.html#func-cmdSetPath">cmdSetPath()</a><td><a href="cmdPath.c.html#func-cmdSetPath">cmdPath.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-get_module_basename">get_module_basename()</a><td><a href="utility.c.html#func-get_module_basename">utility.c</a>
<tr><td>&nbsp;
<td colspan=2>strdup()
<tr><td>Called by:
<td><a href="ModuleCmd_Load.c.html#func-ModuleCmd_Load">ModuleCmd_Load()</a><td><a href="ModuleCmd_Load.c.html#func-ModuleCmd_Load">ModuleCmd_Load.c</a>
<tr><td>&nbsp;
<td><a href="ModuleCmd_Switch.c.html#func-ModuleCmd_Switch">ModuleCmd_Switch()</a><td><a href="ModuleCmd_Switch.c.html#func-ModuleCmd_Switch">ModuleCmd_Switch.c</a>
<tr><td>References Variables:
<td><a href="main.c.html#var-flags">flags</a><td><a href="main.c.html#var-flags">main.c</a>

</table>

<hr>
<h2><a name="func-check_magic">Global Function check_magic()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		check_magic					     **
 ** 									     **
 **   Description:	Check the magic cookie of the file passed as para-   **
 **			meter if it is a valid module file		     **
 **			Based on check_magic in Richard Elling's	     **
 **			find_by_magic &lt;Richard.Elling&quot;@eng.auburn.edu&gt;	     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	char   *filename	Name of the file to check    **
 **			char   *magic_name	Magic cookie		     **
 **			int     magic_len	Length of the magic cookie   **
 ** 									     **
 **   Result:		int	0	Magic cookie doesn't match or any    **
 **					I/O error			     **
 **				1	Success - Magic cookie has matched   **
 ** 									     **
 **   Attached Globals:	-						     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>int check_magic ( char* filename, char* magic_name, int magic_len )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td><a href="error.c.html#func-Module_Error">Module_Error()</a><td><a href="error.c.html#func-Module_Error">error.c</a>
<tr><td>&nbsp;
<td colspan=2>close(), open(), read(), strncmp()
<tr><td>Called by:
<td><a href="locate_module.c.html#func-GetModuleName">GetModuleName()</a><td><a href="locate_module.c.html#func-GetModuleName">locate_module.c</a>
<tr><td>&nbsp;
<td><a href="cmdModule.c.html#func-Read_Modulefile">Read_Modulefile()</a><td><a href="cmdModule.c.html#func-Read_Modulefile">cmdModule.c</a>
<tr><td>&nbsp;
<td><a href="locate_module.c.html#func-SortedDirList">SortedDirList()</a><td><a href="locate_module.c.html#func-SortedDirList">locate_module.c</a>
<tr><td>&nbsp;
<td><a href="locate_module.c.html#func-SourceRC">SourceRC()</a><td><a href="locate_module.c.html#func-SourceRC">locate_module.c</a>
<tr><td>&nbsp;
<td><a href="locate_module.c.html#func-SourceVers">SourceVers()</a><td><a href="locate_module.c.html#func-SourceVers">locate_module.c</a>
<tr><td>&nbsp;
<td><a href="ModuleCmd_Avail.c.html#func-get_dir">get_dir()</a><td><a href="ModuleCmd_Avail.c.html#func-get_dir">ModuleCmd_Avail.c</a>
<tr><td>References Variables:
<td><a href="utility.c.html#var-module_name">module_name</a><td><a href="utility.c.html#var-module_name">utility.c</a>

</table>

<hr>
<h2><a name="func-chk4spch">Global Function chk4spch()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		chk4spch					     **
 ** 									     **
 **   Description:	goes through the given string and changes any non-   **
 **			printable characters to question marks.		     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	char	*s		String to be checke	     **
 ** 									     **
 **   Result:		*s			Will be changed accordingly  **
 ** 									     **
 **   Attached Globals:	-						     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>void chk4spch ( char* s )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Called by:
<td><a href="ModuleCmd_Avail.c.html#func-print_spaced_file">print_spaced_file()</a><td><a href="ModuleCmd_Avail.c.html#func-print_spaced_file">ModuleCmd_Avail.c</a>
<tr><td>&nbsp;
<td><a href="ModuleCmd_Avail.c.html#func-store_file">store_file()</a><td><a href="ModuleCmd_Avail.c.html#func-store_file">ModuleCmd_Avail.c</a>

</table>

<hr>
<h2><a name="func-chk_marked_entry">Global Function chk_marked_entry()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		chk_marked_entry, set_marked_entry		     **
 ** 									     **
 **   Description:	When switching, the variables are marked with a mar- **
 **			ker that is tested to see if the variable was changed**
 **			in the second modulefile. If it was not, then the    **
 **			variable is unset.				     **
 ** 									     **
 **   First Edition:	92/10/25					     **
 ** 									     **
 **   Parameters:	Tcl_HashTable   *table	Attached hash table	     **
 **			char            *var	According variable name	     **
 **			int              val	Value to be set.	     **
 **									     **
 **   Result:		int	0	Mark not set (or the value of the    **
 **					mark was 0 ;-)			     **
 **				else	Value of the mark that has been set  **
 **					with set_marked_entry.		     **
 **   Attached Globals:	-						     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>int chk_marked_entry ( Tcl_HashTable* table, char* var )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Called by:
<td><a href="cmdAlias.c.html#func-cmdSetAlias">cmdSetAlias()</a><td><a href="cmdAlias.c.html#func-cmdSetAlias">cmdAlias.c</a>
<tr><td>&nbsp;
<td><a href="cmdSetenv.c.html#func-moduleSetenv">moduleSetenv()</a><td><a href="cmdSetenv.c.html#func-moduleSetenv">cmdSetenv.c</a>

</table>

<hr>
<h2><a name="func-cleanse_path">Global Function cleanse_path()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		cleanse_path					     **
 ** 									     **
 **   Description:	Copy the passed path into the new path buffer and    **
 **			devalue '.' and '+'				     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	const char   *path	Original path		     **
 **			      char   *newpath	Buffer for to copy the new   **
 **						path in			     **
 **			      int     len	Max length of the new path   **
 **									     **
 **   Result:		newpath		will be filled up with the new, de-  **
 **					valuated path			     **
 **									     **
 **   Attached Globals:	-						     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>void cleanse_path ( const char* path, char* newpath, int len )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td colspan=2>strlen()
<tr><td>Called by:
<td><a href="cmdPath.c.html#func-cmdRemovePath">cmdRemovePath()</a><td><a href="cmdPath.c.html#func-cmdRemovePath">cmdPath.c</a>
<tr><td>&nbsp;
<td><a href="cmdPath.c.html#func-cmdSetPath">cmdSetPath()</a><td><a href="cmdPath.c.html#func-cmdSetPath">cmdPath.c</a>

</table>

<hr>
<h2><a name="func-clear_hash_value">Global Function clear_hash_value()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		clear_hash_value				     **
 ** 									     **
 **   Description:	Remove the specified shell variable from the passed  **
 **			hash table					     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	Tcl_HashTable	*htable		Hash table to be used**
 **			const char	*key		Attached key	     **
 ** 									     **
 **   Result:		int	TCL_OK		Successfull completion	     **
 ** 									     **
 **   Attached Globals:	-						     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>int clear_hash_value ( Tcl_HashTable* htable, const char* key )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td colspan=2>Tcl_DeleteHashEntry()
<tr><td>Called by:
<td><a href="cmdPath.c.html#func-cmdRemovePath">cmdRemovePath()</a><td><a href="cmdPath.c.html#func-cmdRemovePath">cmdPath.c</a>
<tr><td>&nbsp;
<td><a href="cmdSetenv.c.html#func-moduleSetenv">moduleSetenv()</a><td><a href="cmdSetenv.c.html#func-moduleSetenv">cmdSetenv.c</a>
<tr><td>&nbsp;
<td><a href="cmdSetenv.c.html#func-moduleUnsetenv">moduleUnsetenv()</a><td><a href="cmdSetenv.c.html#func-moduleUnsetenv">cmdSetenv.c</a>

</table>

<hr>
<h2><a name="func-getLMFILES">Global Function getLMFILES()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		getLMFILES					     **
 ** 									     **
 **   Description:	Read in the _LMFILES_ environment variable. This one **
 **			may be split into several variables cause by limited **
 **			variable space of some shells (esp. the SUN csh)     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	Tcl_Interp    *interp	Attached Tcl interpreter     **
 ** 									     **
 **   Result:		char*	Value of the environment varibale _LMFILES_  **
 ** 									     **
 **   Attached Globals:							     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>char* getLMFILES ( Tcl_Interp* interp )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td><a href="error.c.html#func-Module_Error">Module_Error()</a><td><a href="error.c.html#func-Module_Error">error.c</a>
<tr><td>&nbsp;
<td colspan=2>Tcl_GetVar2(), realloc(), sprintf(), strdup(), strlen(), strncpy()
<tr><td>Called by:
<td><a href="ModuleCmd_List.c.html#func-ModuleCmd_List">ModuleCmd_List()</a><td><a href="ModuleCmd_List.c.html#func-ModuleCmd_List">ModuleCmd_List.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-__IsLoaded">__IsLoaded()</a><td><a href="utility.c.html#func-__IsLoaded">utility.c</a>
<tr><td>References Variables:
<td><a href="utility.c.html#var-module_name">module_name</a><td><a href="utility.c.html#var-module_name">utility.c</a>

</table>

<hr>
<h2><a name="func-set_derelict">Global Function set_derelict()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		set_derelict					     **
 ** 									     **
 **   Description:	Normalize the current calling shell to one of the    **
 **			basic shells definig the varaible and alias syntax   **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	const char	*name	Invoking shell name	     **
 ** 									     **
 **   Result:		char*			Shell derelict name	     **
 ** 									     **
 **   Attached Globals:	shell_derelict					     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>char* set_derelict ( const char* name )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td colspan=2>strcmp(), strcpy()
<tr><td>Called by:
<td><a href="init.c.html#func-Initialize_Tcl">Initialize_Tcl()</a><td><a href="init.c.html#func-Initialize_Tcl">init.c</a>
<tr><td>References Variables:
<td><a href="main.c.html#var-shell_derelict">shell_derelict</a><td><a href="main.c.html#var-shell_derelict">main.c</a>

</table>

<hr>
<h2><a name="func-set_marked_entry">Global Function set_marked_entry()</a></h2>
<tt>void set_marked_entry ( Tcl_HashTable* table, char* var, int val )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Called by:
<td><a href="cmdAlias.c.html#func-cmdSetAlias">cmdSetAlias()</a><td><a href="cmdAlias.c.html#func-cmdSetAlias">cmdAlias.c</a>
<tr><td>&nbsp;
<td><a href="cmdSetenv.c.html#func-moduleSetenv">moduleSetenv()</a><td><a href="cmdSetenv.c.html#func-moduleSetenv">cmdSetenv.c</a>

</table>

<hr>
<h2><a name="func-store_hash_value">Global Function store_hash_value()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		store_hash_value				     **
 ** 									     **
 **   Description:	Keeps the old value of the variable around if it is  **
 **			touched in the modulefile to enable undoing a	     **
 **			modulefile by resetting the evironment to it started.**
 ** 									     **
 **			This is the same for unset_shell_variable()	     **
 ** 									     **
 **   First Edition:	92/10/14					     **
 ** 									     **
 **   Parameters:	Tcl_HashTable	*htable		Hash table to be used**
 **			const char	*key		Attached key	     **
 **			const char	*value		Alias value	     **
 ** 									     **
 **   Result:		int	TCL_OK		Successfull completion	     **
 ** 									     **
 **   Attached Globals:	-						     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>int store_hash_value ( Tcl_HashTable* htable, const char* key, const char* value )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td colspan=2>strdup()
<tr><td>Called by:
<td><a href="cmdPath.c.html#func-cmdRemovePath">cmdRemovePath()</a><td><a href="cmdPath.c.html#func-cmdRemovePath">cmdPath.c</a>
<tr><td>&nbsp;
<td><a href="cmdAlias.c.html#func-cmdSetAlias">cmdSetAlias()</a><td><a href="cmdAlias.c.html#func-cmdSetAlias">cmdAlias.c</a>
<tr><td>&nbsp;
<td><a href="cmdSetenv.c.html#func-moduleSetenv">moduleSetenv()</a><td><a href="cmdSetenv.c.html#func-moduleSetenv">cmdSetenv.c</a>
<tr><td>&nbsp;
<td><a href="cmdSetenv.c.html#func-moduleUnsetenv">moduleUnsetenv()</a><td><a href="cmdSetenv.c.html#func-moduleUnsetenv">cmdSetenv.c</a>

</table>

<hr>
<h2><a name="func-xdup">Global Function xdup()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		xdup						     **
 ** 									     **
 **   Description:	will return a string with 1 level of environment     **
 ** 			variables expanded. The limit is MOD_BUFSIZE.	     **
 ** 			An env.var. is denoted with either $name or ${name}  **
 **			\$ escapes the expansion and substitutes a '$' in    **
 **			its place.					     **
 ** 									     **
 **   First Edition:	2000/01/21					     **
 ** 									     **
 **   Parameters:	char	*string		Environment variable	     **
 ** 									     **
 **   Result:		char    *		An allocated string	     **
 ** 									     **
 ** ************************************************************************ **
<br>
 zero out buffers 
</pre>

<tt>char* xdup ( char const* string )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td colspan=2>getenv(), memset(), strchr(), strcspn(), strdup(), strlen(), strncat(), strncpy()
<tr><td>Called by:
<td><a href="locate_module.c.html#func-SplitIntoList">SplitIntoList()</a><td><a href="locate_module.c.html#func-SplitIntoList">locate_module.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-xgetenv">xgetenv()</a><td><a href="utility.c.html#func-xgetenv">utility.c</a>

</table>

<hr>
<h2><a name="func-xgetenv">Global Function xgetenv()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		xgetenv						     **
 ** 									     **
 **   Description:	will return an expanded environment variable.	     **
 ** 			However, it will only expand 1 level.		     **
 ** 			See xdup() for details.				     **
 ** 									     **
 **   First Edition:	2000/01/18					     **
 ** 									     **
 **   Parameters:	char	*var		Environment variable	     **
 ** 									     **
 **   Result:		char    *		An allocated string	     **
 ** 									     **
 **   Attached Globals:	-						     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>char* xgetenv ( char const* var )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="modules_def.h.html#file">modules_def.h</a>
<tr><td>Calls:
<td><a href="utility.c.html#func-xdup">xdup()</a><td><a href="utility.c.html#func-xdup">utility.c</a>
<tr><td>&nbsp;
<td colspan=2>getenv()
<tr><td>Called by:
<td><a href="ModuleCmd_Whatis.c.html#func-ModuleCmd_Apropos">ModuleCmd_Apropos()</a><td><a href="ModuleCmd_Whatis.c.html#func-ModuleCmd_Apropos">ModuleCmd_Whatis.c</a>
<tr><td>&nbsp;
<td><a href="ModuleCmd_Avail.c.html#func-ModuleCmd_Avail">ModuleCmd_Avail()</a><td><a href="ModuleCmd_Avail.c.html#func-ModuleCmd_Avail">ModuleCmd_Avail.c</a>
<tr><td>&nbsp;
<td><a href="ModuleCmd_Whatis.c.html#func-ModuleCmd_Whatis">ModuleCmd_Whatis()</a><td><a href="ModuleCmd_Whatis.c.html#func-ModuleCmd_Whatis">ModuleCmd_Whatis.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#func-main">main()</a><td><a href="main.c.html#func-main">main.c</a>
<tr><td>&nbsp;
<td><a href="ModuleCmd_Avail.c.html#func-print_aligned_files">print_aligned_files()</a><td><a href="ModuleCmd_Avail.c.html#func-print_aligned_files">ModuleCmd_Avail.c</a>

</table>

<hr>
<h2><a name="func-Clear_Global_Hash_Tables">Local Function Clear_Global_Hash_Tables()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		Clear_Global_Hash_Tables			     **
 ** 									     **
 **   Description: 	Deletes and reinitializes our env. hash tables.	     **
 ** 									     **
 **   First Edition:	92/10/14					     **
 ** 									     **
 **   Parameters:	-						     **
 **   Result:		-						     **
 ** 									     **
 **   Attached Globals:	setenvHashTable,				     **
 **			unsetenvHashTable,				     **
 **			aliasSetHashTable,				     **
 **			aliasUnsetHashTable				     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>static void Clear_Global_Hash_Tables ( void )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="utility.c.html#file">utility.c</a>
<tr><td>Calls:
<td colspan=2>Tcl_DeleteHashTable(), Tcl_FirstHashEntry(), Tcl_InitHashTable(), Tcl_NextHashEntry()
<tr><td>Called by:
<td><a href="utility.c.html#func-Output_Modulefile_Changes">Output_Modulefile_Changes()</a><td><a href="utility.c.html#func-Output_Modulefile_Changes">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-Unwind_Modulefile_Changes">Unwind_Modulefile_Changes()</a><td><a href="utility.c.html#func-Unwind_Modulefile_Changes">utility.c</a>
<tr><td>References Variables:
<td><a href="main.c.html#var-aliasSetHashTable">aliasSetHashTable</a><td><a href="main.c.html#var-aliasSetHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-aliasUnsetHashTable">aliasUnsetHashTable</a><td><a href="main.c.html#var-aliasUnsetHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-setenvHashTable">setenvHashTable</a><td><a href="main.c.html#var-setenvHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-unsetenvHashTable">unsetenvHashTable</a><td><a href="main.c.html#var-unsetenvHashTable">main.c</a>

</table>

<hr>
<h2><a name="func-ForcePath">Local Function ForcePath()</a></h2>
<tt>static int ForcePath ( Tcl_Interp* interp, char* variable_name, char* force_pathname, int append )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="utility.c.html#file">utility.c</a>
<tr><td>Calls:
<td><a href="cmdPath.c.html#func-cmdRemovePath">cmdRemovePath()</a><td><a href="cmdPath.c.html#func-cmdRemovePath">cmdPath.c</a>
<tr><td>&nbsp;
<td><a href="cmdPath.c.html#func-cmdSetPath">cmdSetPath()</a><td><a href="cmdPath.c.html#func-cmdSetPath">cmdPath.c</a>
<tr><td>Called by:
<td><a href="utility.c.html#func-ForceBasePath">ForceBasePath()</a><td><a href="utility.c.html#func-ForceBasePath">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-ForceSacredPath">ForceSacredPath()</a><td><a href="utility.c.html#func-ForceSacredPath">utility.c</a>

</table>

<hr>
<h2><a name="func-Output_Modulefile_Aliases">Local Function Output_Modulefile_Aliases()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		Output_Modulefile_Aliases			     **
 ** 									     **
 **   Description:	Is used to flush out the changes to the aliases of   **
 **			the current modulefile. But, some shells don't work  **
 **			well with having their alias information set via the **
 **			'eval' command.  So, what we'll do now is output the **
 **			aliases into a /tmp dotfile, have the shell source   **
 **			the /tmp dotfile and then have the shell remove the  **
 **			/tmp dotfile.					     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	Tcl_Interp	*interp		The attached Tcl in- **
 **							terpreter	     **
 ** 									     **
 **   Result:		int	TCL_OK		Successful operation	     **
 ** 									     **
 **   Attached Globals: aliasSetHashTable,	via Output_Modulefile_Aliases**
 **			aliasUnsetHashTable	via Output_Modulefile_Aliases**
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>static int Output_Modulefile_Aliases ( Tcl_Interp* interp )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="utility.c.html#file">utility.c</a>
<tr><td>Calls:
<td><a href="error.c.html#func-Module_Error">Module_Error()</a><td><a href="error.c.html#func-Module_Error">error.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-output_set_alias">output_set_alias()</a><td><a href="utility.c.html#func-output_set_alias">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-output_unset_alias">output_unset_alias()</a><td><a href="utility.c.html#func-output_unset_alias">utility.c</a>
<tr><td>&nbsp;
<td colspan=2>Tcl_FirstHashEntry(), Tcl_NextHashEntry(), fclose(), fopen(), fprintf(), strcmp(), tempnam()
<tr><td>Called by:
<td><a href="utility.c.html#func-Output_Modulefile_Changes">Output_Modulefile_Changes()</a><td><a href="utility.c.html#func-Output_Modulefile_Changes">utility.c</a>
<tr><td>References Variables:
<td><a href="main.c.html#var-aliasSetHashTable">aliasSetHashTable</a><td><a href="main.c.html#var-aliasSetHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-aliasUnsetHashTable">aliasUnsetHashTable</a><td><a href="main.c.html#var-aliasUnsetHashTable">main.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#var-alias_separator">alias_separator</a><td><a href="utility.c.html#var-alias_separator">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#var-aliasfile">aliasfile</a><td><a href="utility.c.html#var-aliasfile">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#var-cmd_separator">cmd_separator</a><td><a href="utility.c.html#var-cmd_separator">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#var-module_name">module_name</a><td><a href="utility.c.html#var-module_name">utility.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-shell_derelict">shell_derelict</a><td><a href="main.c.html#var-shell_derelict">main.c</a>

</table>

<hr>
<h2><a name="func-__IsLoaded">Local Function __IsLoaded()</a></h2>
<pre>
		     **  Oops! Fewer entries in the list of loaded modulefiles
		     **  than in the list of loaded modules. This will
		     **  generally suggest that _LMFILES_ has become corrupted,
		     **  but it may just mean we're working intermittantly with
		     **  an old version.  So, I'll just not touch filename which
		     **  means the search will continue using the old method of
		     **  looking through MODULEPATH.  
</pre>

<tt>static int __IsLoaded ( Tcl_Interp* interp, char* modulename, char** realname, char* filename, int exact )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="utility.c.html#file">utility.c</a>
<tr><td>Calls:
<td><a href="error.c.html#func-Module_Error">Module_Error()</a><td><a href="error.c.html#func-Module_Error">error.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-getLMFILES">getLMFILES()</a><td><a href="utility.c.html#func-getLMFILES">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-get_module_basename">get_module_basename()</a><td><a href="utility.c.html#func-get_module_basename">utility.c</a>
<tr><td>&nbsp;
<td colspan=2>Tcl_GetVar2(), strcmp(), strcpy(), strdup(), strtok()
<tr><td>Called by:
<td><a href="utility.c.html#func-IsLoaded">IsLoaded()</a><td><a href="utility.c.html#func-IsLoaded">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-IsLoaded_ExactMatch">IsLoaded_ExactMatch()</a><td><a href="utility.c.html#func-IsLoaded_ExactMatch">utility.c</a>
<tr><td>References Variables:
<td><a href="utility.c.html#var-module_name">module_name</a><td><a href="utility.c.html#var-module_name">utility.c</a>

</table>

<hr>
<h2><a name="func-chop">Local Function chop()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		chop						     **
 ** 									     **
 **   Description:	Remove '\n' characters from the passed string	     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	char   *string	String to be chopped		     **
 **									     **
 **   Result:		string		The chopped string		     **
 **									     **
 **   Attached Globals:	-						     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>static char* chop ( const char* string )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="utility.c.html#file">utility.c</a>
<tr><td>Called by:
<td><a href="utility.c.html#func-output_set_variable">output_set_variable()</a><td><a href="utility.c.html#func-output_set_variable">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-output_unset_variable">output_unset_variable()</a><td><a href="utility.c.html#func-output_unset_variable">utility.c</a>

</table>

<hr>
<h2><a name="func-get_module_basename">Local Function get_module_basename()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		get_module_basename				     **
 ** 									     **
 **   Description:	Get the name of a module without its version.	     **
 **			This function modifies the string passed in.	     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	char	*modulename		Full module name     **
 ** 									     **
 **   Result:		char*		Module name without version	     **
 ** 									     **
 **   Attached Globals:							     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>static char* get_module_basename ( char* modulename )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="utility.c.html#file">utility.c</a>
<tr><td>Calls:
<td colspan=2>strrchr()
<tr><td>Called by:
<td><a href="utility.c.html#func-Update_LoadedList">Update_LoadedList()</a><td><a href="utility.c.html#func-Update_LoadedList">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-__IsLoaded">__IsLoaded()</a><td><a href="utility.c.html#func-__IsLoaded">utility.c</a>

</table>

<hr>
<h2><a name="func-output_function">Local Function output_function()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		output_function					     **
 ** 									     **
 **   Description:	Actually turns the Modules set-alias information     **
 **			into a string that a shell can source.  Previously,  **
 **			this routine just output the alias information to be **
 **			eval'd by the shell.				     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	const char	*var	Name of the alias to be set  **
 **			const char	*val	Value to be assigned	     **
 ** 									     **
 **   Result:		-						     **
 ** 									     **
 **   Attached Globals:	aliasfile,	The output file for alias commands.  **
 **					see 'Output_Modulefile_Aliases'      **
 **			alias_separator					     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>static void output_function ( const char* var, const char* val )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="utility.c.html#file">utility.c</a>
<tr><td>Calls:
<td colspan=2>_IO_putc(), fprintf()
<tr><td>Called by:
<td><a href="utility.c.html#func-output_set_alias">output_set_alias()</a><td><a href="utility.c.html#func-output_set_alias">utility.c</a>
<tr><td>References Variables:
<td><a href="utility.c.html#var-alias_separator">alias_separator</a><td><a href="utility.c.html#var-alias_separator">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#var-aliasfile">aliasfile</a><td><a href="utility.c.html#var-aliasfile">utility.c</a>

</table>

<hr>
<h2><a name="func-output_set_alias">Local Function output_set_alias()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		output_set_alias				     **
 ** 									     **
 **   Description:	Flush the commands required to set shell aliases de- **
 **			pending on the current invoking shell		     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	const char	*alias		Name of the alias    **
 **			const char	*val		Value to be assigned **
 ** 									     **
 **   Result:		int	TCL_OK		Operation successfull	     **
 ** 									     **
 **   Attached Globals:	aliasfile, 	The alias command is writte out to   **
 **			alias_separator Defined the command separator	     **
 **			shell_derelict	to determine the shell family	     **
 **			shell_name	to determine the real shell type     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>static int output_set_alias ( const char* alias, const char* val )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="utility.c.html#file">utility.c</a>
<tr><td>Calls:
<td><a href="utility.c.html#func-output_function">output_function()</a><td><a href="utility.c.html#func-output_function">utility.c</a>
<tr><td>&nbsp;
<td colspan=2>_IO_putc(), fprintf(), strcmp()
<tr><td>Called by:
<td><a href="utility.c.html#func-Output_Modulefile_Aliases">Output_Modulefile_Aliases()</a><td><a href="utility.c.html#func-Output_Modulefile_Aliases">utility.c</a>
<tr><td>References Variables:
<td><a href="utility.c.html#var-alias_separator">alias_separator</a><td><a href="utility.c.html#var-alias_separator">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#var-aliasfile">aliasfile</a><td><a href="utility.c.html#var-aliasfile">utility.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-shell_derelict">shell_derelict</a><td><a href="main.c.html#var-shell_derelict">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-shell_name">shell_name</a><td><a href="main.c.html#var-shell_name">main.c</a>

</table>

<hr>
<h2><a name="func-output_set_variable">Local Function output_set_variable()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		output_set_variable				     **
 ** 									     **
 **   Description:	Outputs the command required to set a shell variable **
 **			according to the current shell			     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	const char	*var	Name of the variable to be   **
 **						set			     **
 **			const char	*val	Value to be assigned	     **
 **									     **
 **   Result:		int	TCL_OK		Finished successfull	     **
 **				TCL_ERROR	Unknown shell type	     **
 **									     **
 **   Attached Globals:	shell_derelict					     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>static int output_set_variable ( const char* var, const char* val )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="utility.c.html#file">utility.c</a>
<tr><td>Calls:
<td><a href="error.c.html#func-Module_Error">Module_Error()</a><td><a href="error.c.html#func-Module_Error">error.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-chop">chop()</a><td><a href="utility.c.html#func-chop">utility.c</a>
<tr><td>&nbsp;
<td colspan=2>fprintf(), strcmp(), strlen(), strncpy()
<tr><td>Called by:
<td><a href="utility.c.html#func-Output_Modulefile_Changes">Output_Modulefile_Changes()</a><td><a href="utility.c.html#func-Output_Modulefile_Changes">utility.c</a>
<tr><td>References Variables:
<td><a href="utility.c.html#var-cmd_separator">cmd_separator</a><td><a href="utility.c.html#var-cmd_separator">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#var-module_name">module_name</a><td><a href="utility.c.html#var-module_name">utility.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-shell_derelict">shell_derelict</a><td><a href="main.c.html#var-shell_derelict">main.c</a>

</table>

<hr>
<h2><a name="func-output_unset_alias">Local Function output_unset_alias()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		output_unset_alias				     **
 ** 									     **
 **   Description:	Flush the commands required to reset shell aliases   **
 **			depending on the current invoking shell		     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	const char	*alias		Name of the alias    **
 **			const char	*val		Value which has been **
 **							assigned	     **
 ** 									     **
 **   Result:		int	TCL_OK		Operation successfull	     **
 ** 									     **
 **   Attached Globals:	aliasfile, 	The alias command is writte out to   **
 **			alias_separator Defined the command separator	     **
 **			shell_derelict	to determine the shell family	     **
 **			shell_name	to determine the real shell type     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>static int output_unset_alias ( const char* alias, const char* val )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="utility.c.html#file">utility.c</a>
<tr><td>Calls:
<td colspan=2>fprintf(), strcmp()
<tr><td>Called by:
<td><a href="utility.c.html#func-Output_Modulefile_Aliases">Output_Modulefile_Aliases()</a><td><a href="utility.c.html#func-Output_Modulefile_Aliases">utility.c</a>
<tr><td>References Variables:
<td><a href="utility.c.html#var-alias_separator">alias_separator</a><td><a href="utility.c.html#var-alias_separator">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#var-aliasfile">aliasfile</a><td><a href="utility.c.html#var-aliasfile">utility.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-shell_derelict">shell_derelict</a><td><a href="main.c.html#var-shell_derelict">main.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-shell_name">shell_name</a><td><a href="main.c.html#var-shell_name">main.c</a>

</table>

<hr>
<h2><a name="func-output_unset_variable">Local Function output_unset_variable()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		output_unset_variable				     **
 ** 									     **
 **   Description:	Outputs the command required to unset a shell        **
 **			variable according to the current shell		     **
 ** 									     **
 **   First Edition:	91/10/23					     **
 ** 									     **
 **   Parameters:	const char	*var	Name of the variable to be   **
 **						unset			     **
 **									     **
 **   Result:		int	TCL_OK		Finished successfull	     **
 **				TCL_ERROR	Unknown shell type	     **
 **									     **
 **   Attached Globals:	shell_derelict					     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>static int output_unset_variable ( const char* var )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="utility.c.html#file">utility.c</a>
<tr><td>Calls:
<td><a href="error.c.html#func-Module_Error">Module_Error()</a><td><a href="error.c.html#func-Module_Error">error.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#func-chop">chop()</a><td><a href="utility.c.html#func-chop">utility.c</a>
<tr><td>&nbsp;
<td colspan=2>fprintf(), strcmp()
<tr><td>Called by:
<td><a href="utility.c.html#func-Output_Modulefile_Changes">Output_Modulefile_Changes()</a><td><a href="utility.c.html#func-Output_Modulefile_Changes">utility.c</a>
<tr><td>References Variables:
<td><a href="utility.c.html#var-cmd_separator">cmd_separator</a><td><a href="utility.c.html#var-cmd_separator">utility.c</a>
<tr><td>&nbsp;
<td><a href="utility.c.html#var-module_name">module_name</a><td><a href="utility.c.html#var-module_name">utility.c</a>
<tr><td>&nbsp;
<td><a href="main.c.html#var-shell_derelict">shell_derelict</a><td><a href="main.c.html#var-shell_derelict">main.c</a>

</table>

</BODY>
</HTML>
