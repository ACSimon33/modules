<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<!-- This HTML file generated by cxref. -->
<!-- cxref program (c) Andrew M. Bishop 1995,96,97,98,99. -->

<!--
Cxref: cxref -block-comments -verbatim-comments -xref-all -index-all -html -Oxref getopt.c
CPP  : gcc -E -C -dD -dI
-->

<HTML>

<HEAD>
<TITLE>Cross reference for getopt.c of cxref.</TITLE>
</HEAD>

<BODY>

<h1><a name="file">File getopt.c</a></h1>
<pre>
 ** ** Module Header ******************************************************* **
 ** 									     **
 **   Modules Revision 3.0						     **
 **   Providing a flexible user environment				     **
 ** 									     **
 **   File:		getopt.c					     **
 **   First Edition:	95/12/20					     **
 ** 									     **
 **   Authors:	Jens Hamisch, jens@Strawberry.COM			     **
 ** 									     **
 **   Description:	getopt procedure for the Modules package	     **
 ** 									     **
 **   Exports:		getopt		Recognition of commadn line options  **
 ** 									     **
 **   Notes: This is based on the 'Getopt for GNU' from the gcc-2.7.2        **
 **          compiler. It is preferred to the libc version, because it       **
 **	     provides 'long-options'.					     **
 **									     **
 ** ************************************************************************ **
</pre>

<table>
<tr><td>References Variables:
<td><a href="getopt.c.html#var-Id">Id</a><td><a href="getopt.c.html#var-Id">getopt.c</a>
</table>

<hr>
<h2>Included Files</h2>

<ul>
<li><tt>#include &lt;stdio.h&gt;</tt>
</ul>
<ul>
<li><tt>#include &lt;stdlib.h&gt;</tt>
</ul>
<ul>
<li><tt><a href="getopt.h.html#file">#include &quot;getopt.h&quot;</a></tt>
</ul>
<ul>
<li><tt>#include &lt;string.h&gt;</tt>
</ul>
<ul>
<li><tt><a href="modules_def.h.html#file">#include &quot;modules_def.h&quot;</a></tt>
<ul>
<li><tt>#include &lt;stdio.h&gt;</tt>
<li><tt>#include &lt;tcl.h&gt;</tt>
<li><tt><a href="config.h.html#file">#include &quot;config.h&quot;</a></tt>
<li><tt>#include &lt;stdlib.h&gt;</tt>
<li><tt>#include &lt;string.h&gt;</tt>
<li><tt>#include &lt;unistd.h&gt;</tt>
<li><tt>#include &lt;sys/types.h&gt;</tt>
<li><tt>#include &lt;ctype.h&gt;</tt>
<li><tt>#include &lt;sys/stat.h&gt;</tt>
<li><tt>#include &lt;sys/termios.h&gt;</tt>
<li><tt>#include &lt;fcntl.h&gt;</tt>
<li><tt>#include &lt;sys/ioctl.h&gt;</tt>
<li><tt>#include &lt;dirent.h&gt;</tt>
<li><tt>#include &lt;errno.h&gt;</tt>
</ul>
</ul>

<hr>
<h2>Preprocessor definitions</h2>

<tt>#define _NO_PROTO</tt><br>
<p>
<tt>#define _( msgid )</tt><br>
<p>
<tt>#define my_index strchr</tt><br>

<hr>
<h2><a name="var-optarg">Global Variable optarg</a></h2>
<tt>char* optarg</tt><br>
<table>
<tr><td>Visible in:
<td>&nbsp;<td><a href="getopt.c.html#file">getopt.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="main.c.html#file">main.c</a>
<tr><td>Used in:
<td><a href="main.c.html#func-Check_Switches">Check_Switches()</a><td><a href="main.c.html#func-Check_Switches">main.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#func-_getopt_internal">_getopt_internal()</a><td><a href="getopt.c.html#func-_getopt_internal">getopt.c</a>

</table>

<hr>
<h2><a name="var-optind">Global Variable optind</a></h2>
<tt>int optind</tt><br>
<table>
<tr><td>Visible in:
<td>&nbsp;<td><a href="getopt.c.html#file">getopt.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="main.c.html#file">main.c</a>
<tr><td>Used in:
<td><a href="main.c.html#func-Check_Switches">Check_Switches()</a><td><a href="main.c.html#func-Check_Switches">main.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#func-_getopt_initialize">_getopt_initialize()</a><td><a href="getopt.c.html#func-_getopt_initialize">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#func-_getopt_internal">_getopt_internal()</a><td><a href="getopt.c.html#func-_getopt_internal">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#func-exchange">exchange()</a><td><a href="getopt.c.html#func-exchange">getopt.c</a>

</table>

<hr>
<h2><a name="var-opterr">Global Variable opterr</a></h2>
<tt>int opterr</tt><br>
<table>
<tr><td>Visible in:
<td>&nbsp;<td><a href="getopt.c.html#file">getopt.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="main.c.html#file">main.c</a>
<tr><td>Used in:
<td><a href="getopt.c.html#func-_getopt_internal">_getopt_internal()</a><td><a href="getopt.c.html#func-_getopt_internal">getopt.c</a>

</table>

<hr>
<h2><a name="var-optopt">Global Variable optopt</a></h2>
<tt>int optopt</tt><br>
<table>
<tr><td>Visible in:
<td>&nbsp;<td><a href="getopt.c.html#file">getopt.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="main.c.html#file">main.c</a>
<tr><td>Used in:
<td><a href="getopt.c.html#func-_getopt_internal">_getopt_internal()</a><td><a href="getopt.c.html#func-_getopt_internal">getopt.c</a>

</table>

<hr>
<h2>Local Variables</h2>

<b><a name="var-Id">Id</a></b><br>
<tt>static char Id[]</tt><br>
<table>
<tr><td>Used in:
<td>&nbsp;<td><a href="getopt.c.html#file">getopt.c</a>

</table>
<p>
<b><a name="var-UseId">UseId</a></b><br>
<tt>static void* UseId[]</tt><br>
<p>
<b><a name="var-module_name">module_name</a></b><br>
<tt>static char module_name[]</tt><br>
<table>
<tr><td>Used in:
<td><a href="#func-_getopt_internal">_getopt_internal()</a>

</table>
<p>
<b><a name="var-nextchar">nextchar</a></b><br>
<tt>static char* nextchar</tt><br>
<table>
<tr><td>Used in:
<td><a href="#func-_getopt_initialize">_getopt_initialize()</a>
<tr><td>&nbsp;
<td><a href="#func-_getopt_internal">_getopt_internal()</a>

</table>
<p>
<b><a name="var-ordering">ordering</a></b><br>
<tt>static enum {...} ordering</tt><br>
<table>
<tr><td>Used in:
<td><a href="#func-_getopt_initialize">_getopt_initialize()</a>
<tr><td>&nbsp;
<td><a href="#func-_getopt_internal">_getopt_internal()</a>

</table>
<p>
<b><a name="var-posixly_correct">posixly_correct</a></b><br>
<tt>static char* posixly_correct</tt><br>
<table>
<tr><td>Used in:
<td><a href="#func-_getopt_initialize">_getopt_initialize()</a>
<tr><td>&nbsp;
<td><a href="#func-_getopt_internal">_getopt_internal()</a>

</table>
<p>
<b><a name="var-first_nonopt">first_nonopt</a></b><br>
<tt>static int first_nonopt</tt><br>
<table>
<tr><td>Used in:
<td><a href="#func-_getopt_initialize">_getopt_initialize()</a>
<tr><td>&nbsp;
<td><a href="#func-_getopt_internal">_getopt_internal()</a>
<tr><td>&nbsp;
<td><a href="#func-exchange">exchange()</a>

</table>
<p>
<b><a name="var-last_nonopt">last_nonopt</a></b><br>
<tt>static int last_nonopt</tt><br>
<table>
<tr><td>Used in:
<td><a href="#func-_getopt_initialize">_getopt_initialize()</a>
<tr><td>&nbsp;
<td><a href="#func-_getopt_internal">_getopt_internal()</a>
<tr><td>&nbsp;
<td><a href="#func-exchange">exchange()</a>

</table>

<hr>
<h2><a name="func-getopt">Global Function getopt()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		getopt, getopt_long, getopt_long_only		     **
 ** 									     **
 **   Description:	Calls _getopt_internal in order to provide a normal  **
 **			getopt call.					     **
 ** 									     **
 **   First Edition:	95/12/20					     **
 ** 									     **
 **   Parameters:	int	  argc,		# of arguments		     **
 **			char	**argv,		ARGV array		     **
 **			char 	 *optstring,	String of valid short opt.   **
 ** 									     **
 **   Result:		int	'?'	Parse error			     **
 **				0	Long option w/o argument found	     **
 **				else	short option that has been found     **
 **					or the value of a long option	     **
 **				EOF	no more arguments on ARGV	     **
 **									     **
 **   Attached globals:	optind		Index of the current option in the   **
 **					ARGV array			     **
 **			optarg		Argument of an option with value     **
 **			opterr		Set in case of parse errors	     **
 **									     **
 ** ************************************************************************ **
</pre>

<tt>int getopt ( int argc, char* const* argv, const char* optstring )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="getopt.h.html#file">getopt.h</a>
<tr><td>Calls:
<td><a href="getopt.c.html#func-_getopt_internal">_getopt_internal()</a><td><a href="getopt.c.html#func-_getopt_internal">getopt.c</a>

</table>

<hr>
<h2><a name="func-getopt_long">Global Function getopt_long()</a></h2>
<tt>int getopt_long ( int argc, char* const* argv, const char* optstring, const struct option* longopts, int* longind )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="getopt.h.html#file">getopt.h</a>
<tr><td>Calls:
<td><a href="getopt.c.html#func-_getopt_internal">_getopt_internal()</a><td><a href="getopt.c.html#func-_getopt_internal">getopt.c</a>
<tr><td>Called by:
<td><a href="main.c.html#func-Check_Switches">Check_Switches()</a><td><a href="main.c.html#func-Check_Switches">main.c</a>

</table>

<hr>
<h2><a name="func-getopt_long_only">Global Function getopt_long_only()</a></h2>
<tt>int getopt_long_only ( int argc, char* const* argv, const char* optstring, const struct option* longopts, int* longind )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="getopt.h.html#file">getopt.h</a>
<tr><td>Calls:
<td><a href="getopt.c.html#func-_getopt_internal">_getopt_internal()</a><td><a href="getopt.c.html#func-_getopt_internal">getopt.c</a>

</table>

<hr>
<h2><a name="func-_getopt_initialize">Local Function _getopt_initialize()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		_getopt_initialize				     **
 ** 									     **
 **   Description:	Initialize the internal data when the first call is  **
 **			made						     **
 **			This defines how to proceed if options and non-op-   **
 **			tions are mixed up. See definition of the enum       **
 **			'ordering' for further explanation.		     **
 ** 									     **
 **   First Edition:	95/12/20					     **
 ** 									     **
 **   Parameters:	char	*optstring	Options string		     **
 ** 									     **
 **   Result:		argv		ARGV array with exchanged sequences  **
 **									     **
 **   Attached globals: first_nonopt,		First an las position of     **
 **			last_nonopt		non-option arguments	     **
 **			optind			Option scan index	     **
 **			nextchar		Next character to scan	     **
 **			posixly_correct		Value of the environment     **
 **						variable 'POSIXLY_CORRECT'   **
 **			ordering		Ordering method ...	     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>static const char* _getopt_initialize ( const char* optstring )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="getopt.c.html#file">getopt.c</a>
<tr><td>Calls:
<td colspan=2>getenv()
<tr><td>Called by:
<td><a href="getopt.c.html#func-_getopt_internal">_getopt_internal()</a><td><a href="getopt.c.html#func-_getopt_internal">getopt.c</a>
<tr><td>References Variables:
<td><a href="getopt.c.html#var-first_nonopt">first_nonopt</a><td><a href="getopt.c.html#var-first_nonopt">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-last_nonopt">last_nonopt</a><td><a href="getopt.c.html#var-last_nonopt">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-nextchar">nextchar</a><td><a href="getopt.c.html#var-nextchar">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-optind">optind</a><td><a href="getopt.c.html#var-optind">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-ordering">ordering</a><td><a href="getopt.c.html#var-ordering">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-posixly_correct">posixly_correct</a><td><a href="getopt.c.html#var-posixly_correct">getopt.c</a>

</table>

<hr>
<h2><a name="func-_getopt_internal">Local Function _getopt_internal()</a></h2>
<tt>static int _getopt_internal ( int argc, char* const* argv, const char* optstring, const struct option* longopts, int* longind, int long_only )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="getopt.c.html#file">getopt.c</a>
<tr><td>Calls:
<td><a href="error.c.html#func-Module_Error">Module_Error()</a><td><a href="error.c.html#func-Module_Error">error.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#func-_getopt_initialize">_getopt_initialize()</a><td><a href="getopt.c.html#func-_getopt_initialize">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#func-exchange">exchange()</a><td><a href="getopt.c.html#func-exchange">getopt.c</a>
<tr><td>&nbsp;
<td colspan=2>sprintf(), strchr(), strcmp(), strlen(), strncmp()
<tr><td>Called by:
<td><a href="getopt.c.html#func-getopt">getopt()</a><td><a href="getopt.c.html#func-getopt">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#func-getopt_long">getopt_long()</a><td><a href="getopt.c.html#func-getopt_long">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#func-getopt_long_only">getopt_long_only()</a><td><a href="getopt.c.html#func-getopt_long_only">getopt.c</a>
<tr><td>References Variables:
<td><a href="getopt.c.html#var-first_nonopt">first_nonopt</a><td><a href="getopt.c.html#var-first_nonopt">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-last_nonopt">last_nonopt</a><td><a href="getopt.c.html#var-last_nonopt">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-module_name">module_name</a><td><a href="getopt.c.html#var-module_name">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-nextchar">nextchar</a><td><a href="getopt.c.html#var-nextchar">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-optarg">optarg</a><td><a href="getopt.c.html#var-optarg">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-opterr">opterr</a><td><a href="getopt.c.html#var-opterr">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-optind">optind</a><td><a href="getopt.c.html#var-optind">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-optopt">optopt</a><td><a href="getopt.c.html#var-optopt">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-ordering">ordering</a><td><a href="getopt.c.html#var-ordering">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-posixly_correct">posixly_correct</a><td><a href="getopt.c.html#var-posixly_correct">getopt.c</a>

</table>

<hr>
<h2><a name="func-exchange">Local Function exchange()</a></h2>
<pre>
 ** ** Function-Header ***************************************************** **
 ** 									     **
 **   Function:		exchange					     **
 ** 									     **
 **   Description:	Exchange two adjacent subsequences of ARGV.	     **
 **			One subsequence is elements( first_nonopt,	     **
 **			last_nonopt) which contains all the non-options that **
 **			have been skipped so far. The other is elements	     **
 **			(last_nonopt,optind), which contains all the options **
 **			processed since those non-options were skipped.	     **
 **									     **
 **  			`first_nonopt' and `last_nonopt' are relocated so    **
 **			that they describe the new indices of the non-options**
 **			in ARGV after they are moved. 			     **
 ** 									     **
 **   First Edition:	95/12/20					     **
 ** 									     **
 **   Parameters:	char	**argv		Command line arguments	     **
 ** 									     **
 **   Result:		argv		ARGV array with exchanged sequences  **
 ** 									     **
 **   Attached Globals:	first_nonopt	first and last non option argument   **
 **			last_nonopt	on the stream before and after the   **
 **					change.( I/O parameter)		     **
 ** 									     **
 ** ************************************************************************ **
</pre>

<tt>static void exchange ( char** argv )</tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="getopt.c.html#file">getopt.c</a>
<tr><td>Called by:
<td><a href="getopt.c.html#func-_getopt_internal">_getopt_internal()</a><td><a href="getopt.c.html#func-_getopt_internal">getopt.c</a>
<tr><td>References Variables:
<td><a href="getopt.c.html#var-first_nonopt">first_nonopt</a><td><a href="getopt.c.html#var-first_nonopt">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-last_nonopt">last_nonopt</a><td><a href="getopt.c.html#var-last_nonopt">getopt.c</a>
<tr><td>&nbsp;
<td><a href="getopt.c.html#var-optind">optind</a><td><a href="getopt.c.html#var-optind">getopt.c</a>

</table>

</BODY>
</HTML>
