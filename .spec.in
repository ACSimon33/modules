Name: modules
Version: @VERSION@
Release: 1
Summary: Environment Modules
Distribution: Berkeley Laboratory Distribution
Vendor: Lawrence Berkeley National Laboratory
Packager: Eric Roman <eroman@lbl.gov> (modified by R.K.Owen <rk@owen.sj.ca.us>
Group: Utilities/Shell
Copyright: GPL
Source:  ftp://owen.sj.ca.us/pub/rkowen/modules/modules-@VERSION@.tar.gz
Patch: modules-linux.patch

%description
The Modules package provides for the dynamic modification of a user's
environment via modulefiles.  Each modulefile contains the information
needed to configure the shell for an application. Once the Modules
package is initialized, the environment can be modified on a per-module
basis using the module command which interprets modulefiles. Typically
modulefiles instruct the module command to alter or set shell environment
variables such as PATH, MANPATH, etc. modulefiles may be shared by many
users on a system and users may have their own collection to supplement
or replace the shared modulefiles.  The modules environment is common
on SGI/Crays and many workstation farms.


# prep section.  Tell RPM how to untar.
%prep
%setup -n modules-@VERSION@
%patch

# build section.  Tell RPM how to run make
%build
./configure \
		--prefix=/usr/local/Modules/@VERSION@ \
                --with-version-path=/usr/local/Modules/versions \
                --with-module-path=/usr/local/Modules/modulefiles \
		--with-etc-path=/etc \
		--with-skel-path=/etc/skel \
                --x-include=/usr/include/X11 \
                --x-libraries=/usr/X11/lib
                --with-tcl-include=/usr/include \
                --with-tcl-libraries=/usr/lib
make

%install
make install

%clean
rm -rf /usr/local/Modules/@VERSION@

%files
# Tell RPM where to find the files that just spewed all over the disk...
/usr/local/Modules/@VERSION@/bin/modulecmd
/usr/local/Modules/@VERSION@/init/bash
/usr/local/Modules/@VERSION@/init/csh 
/usr/local/Modules/@VERSION@/init/perl
/usr/local/Modules/@VERSION@/init/sh  
/usr/local/Modules/@VERSION@/init/tcsh
/usr/local/Modules/@VERSION@/init/zsh 
/usr/local/Modules/@VERSION@/init/ksh 
/usr/local/Modules/@VERSION@/init/.modulespath 
/usr/local/Modules/@VERSION@/man/man1/module.1    
/usr/local/Modules/@VERSION@/man/man4/modulefile.4
/usr/local/Modules/@VERSION@/bin/add.modules
/usr/local/Modules/@VERSION@/bin/mkroot
/usr/local/Modules/@VERSION@/modulefiles/modules
/usr/local/Modules/@VERSION@/modulefiles/module-info
/usr/local/Modules/@VERSION@/modulefiles/null 
/usr/local/Modules/@VERSION@/modulefiles/use.own
/usr/local/Modules/@VERSION@/modulefiles/dot
/usr/local/Modules/versions/@VERSION@
